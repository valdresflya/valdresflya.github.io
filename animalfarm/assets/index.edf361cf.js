var ls=Object.defineProperty;var ns=(r,e,t)=>e in r?ls(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var d=(r,e,t)=>(ns(r,typeof e!="symbol"?e+"":e,t),t);import{v as rs,G as Mt,S as es,i as ts,s as ss,P as as,a as _s,e as n,c as gt,b as f,t as z,d as i,f as $t,g as T,h as s,m as wt,j as be,l as R,k as et,n as j,o as bt,p as xt,q as F,r as yt,u as hs,w as us}from"./vendor.f5b4c1c7.js";const ds=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))o(_);new MutationObserver(_=>{for(const h of _)if(h.type==="childList")for(const p of h.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function t(_){const h={};return _.integrity&&(h.integrity=_.integrity),_.referrerpolicy&&(h.referrerPolicy=_.referrerpolicy),_.crossorigin==="use-credentials"?h.credentials="include":_.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(_){if(_.ep)return;_.ep=!0;const h=t(_);fetch(_.href,h)}};ds();class cs{constructor({pos_x:e=0,pos_y:t=0,pos_z:o=0,size_x:_=0,size_y:h=0,size_z:p=0}){d(this,"__id",rs());d(this,"_pos_x");d(this,"_pos_y");d(this,"_pos_z");d(this,"_size_x");d(this,"_size_y");d(this,"_size_z");d(this,"_move_dir",Math.random()*360*Math.PI/180);d(this,"_color",[255,255,255]);d(this,"_name");this._pos_x=e,this._pos_y=t,this._pos_z=o,this._size_x=_,this._size_y=h,this._size_z=p}get move_dir(){return this._move_dir}set move_dir(e){this._move_dir=e*Math.PI/180}get color(){return this._color}set color(e){this._color=e}get name(){return this._name}get position(){return{x:this._pos_x,y:this._pos_y,z:this._pos_z}}get size(){return{x:this._size_x,y:this._size_y,z:this._size_z}}move({x:e=0,y:t=0,z:o=0}){this._pos_x=this._pos_x+e,this._pos_y=this._pos_y+t,this._pos_z=this._pos_z+o}grow({x:e=0,y:t=0,z:o=0}){this._size_x=this._size_x+e,this._size_y=this._size_y+t,this._size_z=this._size_z+o}discrete_pos_x(e,t){let o=this._pos_x;return o<0?o=0:o>=t&&(o=t-1),Math.floor(o/t*e)}discrete_pos_y(e,t){let o=this._pos_y;return o<0?o=0:o>=t&&(o=t-1),Math.floor(o/t*e)}}class fs extends cs{constructor({pos_x:e=0,pos_y:t=0,pos_z:o=0,size_x:_=0,size_y:h=0,size_z:p=0,oxygen:y="unknown",breed:c="unknown",born:w=-1,speed:k=0}){super({pos_x:e,pos_y:t,pos_z:o,size_x:_,size_y:h,size_z:p});d(this,"_alive",!0);d(this,"_born");d(this,"_max_age",100);d(this,"_died");d(this,"_oxygen");d(this,"_breed");d(this,"_speed");d(this,"_followed_by");d(this,"_reproduced");d(this,"_reproduce_time",200);this._oxygen=y,this._breed=c,this._born=w,this._speed=k,this._reproduced=w}get alive(){return this._alive}get born(){return this._born}get max_age(){return this._max_age}get died(){return this._died}get oxygen(){return this._oxygen}get breed(){return this._breed}get speed(){return this._speed}get followed_by(){return this._followed_by}set followed_by(e){this._followed_by=e}get reproduced(){return this._reproduced}set reproduced(e){this._reproduced=e}get reproduce_time(){return this._reproduce_time}die(e){this._alive==!0&&(this._alive=!1,this._speed=0,e&&(this._died=e))}reproduce(e,t){return console.log("Organism should not reproduce"),Error}}class ps extends fs{constructor({pos_x:e=0,pos_y:t=0,pos_z:o=0,size_x:_=0,size_y:h=0,size_z:p=0,oxygen:y="unknown",carnivore:c=!1,food:w=[],name:k="unknown",breed:A="unknown",born:v=-1,animal_type:g="unknown",latin:G="unknown",speed:S=1,sex:Y="unknown"}){super({pos_x:e,pos_y:t,pos_z:o,size_x:_,size_y:h,size_z:p,oxygen:y,breed:A,born:v});d(this,"_carnivore");d(this,"_food");d(this,"_sex");d(this,"_animal_type");d(this,"_latin");d(this,"_mother");d(this,"_father");d(this,"_children",0);d(this,"_max_follow_distance",200);d(this,"_sprint",2);d(this,"_max_stamina",200);d(this,"_hungry_when",200);d(this,"_horny_when",300);d(this,"_recovery_time",Math.floor(100*Math.random()));d(this,"_hungry",0);d(this,"_horny",0);d(this,"_hunting",!1);d(this,"_follows");d(this,"_stamina",this._max_stamina);d(this,"_recovering",-this._recovery_time);this._carnivore=c,this._food=w,this._name=k,this._sex=Y,this._animal_type=g,this._latin=G,this._speed=S}get carnivor(){return this._carnivore}get food(){return this._food}get sex(){return this._sex}get animal_type(){return this._animal_type}get latin(){return this._latin}get mother(){return this._mother}get father(){return this._father}get children(){return this._children}set children(e){this._children=e}get sprint(){return this._sprint}set sprint(e){this._sprint=e}get max_stamina(){return this._max_stamina}get hungry_when(){return this._hungry_when}get horny_when(){return this._horny_when}get recovery_time(){return this._recovery_time}get hungry(){return this._hungry}set hungry(e){this._hungry=e}get horny(){return this._horny}set horny(e){this._horny=e}get hunting(){return this._hunting}set hunting(e){this._hunting=e}get follows(){return this._follows}set follows(e){this._follows=e}get stamina(){return this._stamina}set stamina(e){this._stamina=e}eat_meat(){this._carnivore=!0}go_vegan(){this._carnivore=!1}add_to_diet(e){this._food.push(e)}edges({width:e,height:t}){this.position.x>=e-this.size.x/2?(this._pos_x=e-this.size.x/2,this.move_dir=90+this.move_dir*180/Math.PI):this.position.x<=this.size.x/2&&(this._pos_x=this.size.x/2,this.move_dir=90+this.move_dir*180/Math.PI),this.position.y>=t-this.size.y/2?(this._pos_y=t-this.size.y/2,this.move_dir=360-this.move_dir*180/Math.PI):this.position.y<=this.size.y/2&&(this._pos_y=this.size.y/2,this.move_dir=360-this.move_dir*180/Math.PI)}walk({width:e,height:t,speed_manipulator:o=0}){this.edges({width:e,height:t});let _=Math.cos(this.move_dir)*this.speed*(1+this.sprint*o),h=Math.sin(this.move_dir)*this.speed*(1+this.sprint*o);this._stamina-=10*o,this.move({x:_,y:h})}change_direction({direction:e=100}){this.move_dir=this.move_dir*180/Math.PI+e*(.5-Math.random())}in_recovery(e){return e-this._recovering<=this._recovery_time}move_towards(e,t,o){t-this._recovering>this._recovery_time&&(this._stamina>0&&e.alive?(this.move_dir=Math.atan2(e.position.y-this.position.y,e.position.x-this.position.x)*180/Math.PI,this.follows=e,o&&(e.followed_by=this,this.hunting=!0)):(this.follows=null,this.hunting=!1,this._stamina<=0&&(this._recovering=t,this._stamina=this._max_stamina)))}move_away(e){this.move_dir=Math.atan2(-e.position.y+this.position.y,-e.position.x+this.position.x)*180/Math.PI}do_you_eat(e){let t;return this._food.includes(e.name)&&this._carnivore==!0?t=!0:t=!1,t}eat(e,t){let o=!1;return this.do_you_eat(e)==!0&&e.alive==!0&&(e.die(t),o=!0,this.hungry=0,this.follows=null),o}hunt({prey:e,timer:t,width:o,height:_}){let h=!1;this.move_towards(e,t,!0),this.walk({width:o,height:_,speed_manipulator:.5});let p=this.position.x-e.position.x,y=this.position.y-e.position.y,c=Math.sqrt(p*p+y*y);return this.size.x/2+e.size.x/2>=c?h=this.eat(e,t):c>this._max_follow_distance&&(this.follows=null),h}mate({prey:e,timer:t,width:o,height:_}){let h=!1;if(t-e.reproduced>e.reproduce_time){this.move_towards(e,t,!1),this.walk({width:o,height:_,speed_manipulator:.2});let p=this.position.x-e.position.x,y=this.position.y-e.position.y,c=Math.sqrt(p*p+y*y);this.size.x/2+e.size.x/2>=c?(h=!0,this.follows=null):c>this._max_follow_distance&&(this.follows=null)}else this.follows=null;return h}could_you_reproduce(e){return console.log("Reproduction Error"),!1}reproduce(e,t){return console.log("This was an Error"),Error}}function ms({f_prob:r=.45,m_prob:e=.45}){let t=Math.random(),o="unknown";return t<=r?o="female":t>e+r?o="non-binary":o="male",o}class is extends ps{constructor({pos_x:e=0,pos_y:t=0,pos_z:o=0,size_x:_=20,size_y:h=20,size_z:p=17,carnivore:y=!1,food:c=[],speed:w=2,born:k=-1,name:A="unknown",latin:v="unknown"}){let g=ms({f_prob:.45,m_prob:.45});super({pos_x:e,pos_y:t,pos_z:o,size_x:_,size_y:h,size_z:p,carnivore:y,food:c,name:A,speed:w,latin:v,born:k,sex:g,oxygen:"lungs",breed:"sexual"})}could_you_reproduce(e){let t;return this.name==e.name&&e.sex=="male"&&this._sex=="female"&&(this._breed="sexual")?this._father!=e.__id&&e.mother!=this.__id&&(t=!0):t=!1,t}reproduction_details(e,t,o){this._mother=e.__id,this._father=t.__id,this._speed=(Math.random()<.5?e.speed:t.speed)*(1.1-Math.random()*.2),this._stamina=(Math.random()<.5?e.max_stamina:t.max_stamina)*(1.1-Math.random()*.2),this._max_age=(Math.random()<.5?e.max_age:t.max_age)*(1.1-Math.random()*.2),this.reproduced=o}reproduce(e,t){this._children+=1,e.children+=1;let o=Object.create(this);return o.reproduction_details(this,e,t),this.reproduced=t,o}}const X=new Mt(10,1);class os extends is{constructor({pos_x:e=0,pos_y:t=0,pos_z:o=0,size_x:_=20,size_y:h=20,size_z:p=17,carnivore:y=!1,food:c=[],speed:w=1,name:k="unknown",sex:A="unknown",latin:v="unknown",born:g=-1}){c.push("Banana");super({pos_x:e,pos_y:t,pos_z:o,size_x:_,size_y:h,size_z:p,carnivore:y,food:c,name:k,sex:A,speed:w,latin:v,born:g,animal_type:"Primate"})}}class Se extends os{constructor({pos_x:e=Math.random()*1e3,pos_y:t=Math.random()*500,pos_z:o=0,size_x:_=10,size_y:h=10,size_z:p=5,carnivore:y=!0,food:c=[],born:w=-1}){c.push("Human");super({pos_x:e,pos_y:t,pos_z:o,size_x:_,size_y:h,size_z:p,carnivore:y,food:c,born:w,name:"Gorilla",latin:"Gorilla Gorilla",speed:1});this.color=[15,156,34],this._max_age=X.ppf(Math.random())*80,this._reproduce_time=X.ppf(Math.random())*20,this._max_stamina=X.ppf(Math.random())*20}reproduce(e,t){let o=new Se({pos_x:this.position.x,pos_y:this.position.y,pos_z:this.position.z,size_x:this.size.x*.9,size_y:this.size.y*.9,born:t});return o.reproduction_details(this,e,t),this.reproduced=t,o}}class zt extends os{constructor({pos_x:e=Math.random()*1e3,pos_y:t=Math.random()*500,pos_z:o=0,size_x:_=6,size_y:h=6,size_z:p=3,carnivore:y=!0,food:c=[],born:w=-1}){c.push("Lion");super({pos_x:e,pos_y:t,pos_z:o,size_x:_,size_y:h,size_z:p,carnivore:y,food:c,born:w,name:"Human",latin:"Homo Sapiens",speed:2.5});d(this,"norm_distr",new Mt(2e3,Math.pow(100,2)));this.color=[150,0,150],this._max_age=X.ppf(Math.random())*100,this._reproduce_time=X.ppf(Math.random())*20,this._max_stamina=X.ppf(Math.random())*500}reproduce(e,t){let o=new zt({pos_x:this.position.x,pos_y:this.position.y,pos_z:this.position.z,born:t});return o.reproduction_details(this,e,t),this.reproduced=t,o}}class kt extends is{constructor({pos_x:e=Math.random()*1e3,pos_y:t=Math.random()*500,pos_z:o=0,size_x:_=12,size_y:h=12,size_z:p=17,carnivore:y=!0,food:c=[],born:w=-1}){c.push("Gorilla");super({pos_x:e,pos_y:t,pos_z:o,size_x:_,size_y:h,size_z:p,carnivore:y,food:c,born:w,name:"Lion",latin:"Panthera Leo",speed:5});d(this,"norm_distr",new Mt(800,Math.pow(100,2)));this.color=[204,102,0],this._max_age=X.ppf(Math.random())*50,this._reproduce_time=X.ppf(Math.random())*15,this._max_stamina=X.ppf(Math.random())*100}reproduce(e,t){let o=new kt({pos_x:this.position.x,pos_y:this.position.y,pos_z:this.position.z,born:t});return o.reproduction_details(this,e,t),this.reproduced=t,o}}function vs(r){let e,t,o,_,h,p,y,c,w,k,A,v,g,G,S,Y,le,J,H,ne,Z,M,Q,re,U,xe,V,q,E,Ie,Le,ye,ae,D,Oe,Re,Me,$,_e,Ae,I,Ge,ze,ee,he,He,L,l,a,m,b,ue,C,W,P,de,qe,Ne,ce,Ct,Te,tt,ke,pe,Ce,Pt,me,Pe,Et,B,st,K,St,it,Fe,It,ot,Be,Lt,lt,De,nt,Ee,N,ve,We,Ot,Ke,rt,Rt,te,je,At,Je,at,Gt,ge,Ht,_t,qt,Nt,we,Qe,Tt,Ue,ht,Ft,se,Ve,Bt,Xe,ut,Dt,ie,Wt,dt,Kt,ct,jt,Jt,oe,Ye,Qt,Ze,ft,Ut,fe,Vt,pt,Xt,mt,O,vt,Yt;return o=new as({props:{sketch:r[15]}}),ce=new _s({props:{classNameTable:"table table-compact w-full",columns:r[14],rows:r[2]}}),{c(){e=n("div"),t=n("div"),gt(o.$$.fragment),_=f(),h=n("div"),p=n("input"),y=f(),c=n("div"),w=f(),k=n("div"),A=n("label"),v=f(),g=n("ul"),G=n("li"),S=n("button"),S.textContent="Restart",Y=f(),le=n("li"),J=n("button"),J.textContent="end",H=f(),ne=n("li"),Z=f(),M=n("li"),Q=n("label"),Q.textContent="Open data",re=f(),U=n("li"),xe=f(),V=n("li"),q=n("label"),E=n("input"),Ie=z("Show connectors"),Le=f(),ye=n("li"),ae=n("label"),D=n("input"),Oe=z("Show grid"),Re=f(),Me=n("li"),$=n("div"),_e=n("label"),_e.textContent="RENDER",Ae=f(),I=n("input"),Ge=f(),ze=n("li"),ee=n("div"),he=n("label"),he.textContent="SPEED",He=f(),L=n("input"),l=f(),a=n("li"),m=f(),b=n("li"),ue=n("button"),ue.textContent="Change direction",C=f(),W=n("input"),P=f(),de=n("div"),qe=n("div"),Ne=n("div"),gt(ce.$$.fragment),Ct=f(),Te=n("div"),Te.innerHTML='<label for="my-modal" class="btn btn-secondary">Close</label>',tt=f(),ke=n("div"),pe=n("div"),Ce=n("label"),Ce.textContent="Further options",Pt=f(),me=n("div"),Pe=n("label"),Pe.textContent="Create animals",Et=f(),B=n("ul"),st=n("li"),K=n("input"),St=f(),it=n("li"),Fe=n("div"),Fe.textContent="Human",It=f(),ot=n("li"),Be=n("div"),Be.textContent="Gorilla",Lt=f(),lt=n("li"),De=n("div"),De.textContent="Lions",nt=f(),Ee=n("div"),N=n("div"),ve=n("div"),We=n("div"),We.textContent="Step",Ot=f(),Ke=n("div"),rt=z(r[6]),Rt=f(),te=n("div"),je=n("div"),je.textContent="Produced",At=f(),Je=n("div"),at=z(r[0]),Gt=f(),ge=n("div"),Ht=z("Reproduced: "),_t=z(r[10]),qt=z("%"),Nt=f(),we=n("div"),Qe=n("div"),Qe.textContent="Alive",Tt=f(),Ue=n("div"),ht=z(r[13]),Ft=f(),se=n("div"),Ve=n("div"),Ve.textContent="Died",Bt=f(),Xe=n("div"),ut=z(r[1]),Dt=f(),ie=n("div"),Wt=z("Eaten: "),dt=z(r[12]),Kt=z("%, Old: "),ct=z(r[11]),jt=z("%"),Jt=f(),oe=n("div"),Ye=n("div"),Ye.textContent="Framerate",Qt=f(),Ze=n("div"),ft=z(r[9]),Ut=f(),fe=n("div"),Vt=z("Set: "),pt=z(r[7]),Xt=z(", Frequency: "),mt=z(r[8]),i(t,"class","absolute"),$t(t,"top","10px"),$t(t,"left","10px"),i(e,"class",""),i(p,"id","my-drawer"),i(p,"type","checkbox"),i(p,"class","drawer-toggle"),i(c,"class","drawer-content"),i(A,"for","my-drawer"),i(A,"class","drawer-overlay"),i(S,"class","btn"),i(J,"class","btn"),i(Q,"for","my-modal"),i(Q,"class","btn btn-primary"),i(E,"id","show_connectors"),i(E,"type","checkbox"),i(E,"class","toggle toggle-accent absolute left-2"),i(q,"class","btn btn-primary"),i(q,"for","show_connectors"),i(D,"id","show_grid"),i(D,"type","checkbox"),i(D,"class","toggle toggle-accent absolute left-2"),i(ae,"class","btn btn-primary"),i(_e,"class",""),i(_e,"for","frame_reducer"),i(I,"id","frame_reducer"),i(I,"class","range range-xs range-accent"),i(I,"type","range"),i(I,"min","1"),i(I,"max","100"),i(I,"step","1"),i($,"class","bg-primary"),i(he,"class",""),i(he,"for","frame_rate"),i(L,"id","frame_rate"),i(L,"class","range range-xs range-accent"),i(L,"type","range"),i(L,"min","1"),i(L,"max","60"),i(L,"step","1"),i(ee,"class","bg-primary"),i(ue,"class","btn btn-secondary"),i(g,"class","menu p-4 overflow-y-auto w-80 bg-base-100 font-semibold text-white gap-2"),i(k,"class","drawer-side"),i(h,"class","h-screen drawer w-full rounded"),i(W,"type","checkbox"),i(W,"id","my-modal"),i(W,"class","modal-toggle"),i(Ne,"class","overflow-x-auto"),i(qe,"class","modal-box max-w-[1600px] max-h-[800px]"),i(Te,"class","modal-action absolute top-4 right-4"),i(de,"class","modal"),i(Ce,"for","my-drawer"),i(Ce,"class","btn drawer-button"),i(Pe,"tabindex","0"),i(Pe,"class","m-1 btn btn-accent"),i(K,"type","number"),i(K,"min","1"),i(K,"max","10000"),i(K,"class","input input-bordered input-primary w-full max-w-xs"),i(B,"tabindex","0"),i(B,"class","p-2 shadow menu dropdown-content bg-base-100 rounded-box w-52"),i(me,"class","dropdown dropdown-down"),i(pe,"class","flex flex-row justify-left items-center gap-2 px-4"),i(ke,"class","absolute top-2 w-full"),i(We,"class","stat-title"),i(Ke,"class","stat-value"),i(ve,"class","stat"),i(je,"class","stat-title"),i(Je,"class","stat-value"),i(ge,"class","stat-desc"),i(te,"class","stat"),i(Qe,"class","stat-title"),i(Ue,"class","stat-value"),i(we,"class","stat"),i(Ve,"class","stat-title"),i(Xe,"class","stat-value"),i(ie,"class","stat-desc"),i(se,"class","stat"),i(Ye,"class","stat-title"),i(Ze,"class","stat-value"),i(fe,"class","stat-desc"),i(oe,"class","stat"),i(N,"class","shadow stats flex bg-gray-100"),i(Ee,"class","hidden md:visible absolute bottom-4 left-20 right-auto w-[90%]")},m(u,x){T(u,e,x),s(e,t),wt(o,t,null),T(u,_,x),T(u,h,x),s(h,p),s(h,y),s(h,c),s(h,w),s(h,k),s(k,A),s(k,v),s(k,g),s(g,G),s(G,S),s(g,Y),s(g,le),s(le,J),s(g,H),s(g,ne),s(g,Z),s(g,M),s(M,Q),s(g,re),s(g,U),s(g,xe),s(g,V),s(V,q),s(q,E),E.checked=r[5],s(q,Ie),s(g,Le),s(g,ye),s(ye,ae),s(ae,D),D.checked=r[4],s(ae,Oe),s(g,Re),s(g,Me),s(Me,$),s($,_e),s($,Ae),s($,I),be(I,r[8]),s(g,Ge),s(g,ze),s(ze,ee),s(ee,he),s(ee,He),s(ee,L),be(L,r[7]),s(g,l),s(g,a),s(g,m),s(g,b),s(b,ue),T(u,C,x),T(u,W,x),T(u,P,x),T(u,de,x),s(de,qe),s(qe,Ne),wt(ce,Ne,null),s(de,Ct),s(de,Te),T(u,tt,x),T(u,ke,x),s(ke,pe),s(pe,Ce),s(pe,Pt),s(pe,me),s(me,Pe),s(me,Et),s(me,B),s(B,st),s(st,K),be(K,r[3]),s(B,St),s(B,it),s(it,Fe),s(B,It),s(B,ot),s(ot,Be),s(B,Lt),s(B,lt),s(lt,De),T(u,nt,x),T(u,Ee,x),s(Ee,N),s(N,ve),s(ve,We),s(ve,Ot),s(ve,Ke),s(Ke,rt),s(N,Rt),s(N,te),s(te,je),s(te,At),s(te,Je),s(Je,at),s(te,Gt),s(te,ge),s(ge,Ht),s(ge,_t),s(ge,qt),s(N,Nt),s(N,we),s(we,Qe),s(we,Tt),s(we,Ue),s(Ue,ht),s(N,Ft),s(N,se),s(se,Ve),s(se,Bt),s(se,Xe),s(Xe,ut),s(se,Dt),s(se,ie),s(ie,Wt),s(ie,dt),s(ie,Kt),s(ie,ct),s(ie,jt),s(N,Jt),s(N,oe),s(oe,Ye),s(oe,Qt),s(oe,Ze),s(Ze,ft),s(oe,Ut),s(oe,fe),s(fe,Vt),s(fe,pt),s(fe,Xt),s(fe,mt),O=!0,vt||(Yt=[R(S,"click",bs),R(J,"click",r[20]),R(Q,"click",r[21]),R(E,"change",r[25]),R(D,"change",r[26]),R(I,"change",r[27]),R(I,"input",r[27]),R(L,"change",r[28]),R(L,"input",r[28]),R(ue,"click",r[19]),R(K,"input",r[29]),R(Fe,"click",r[16]),R(Be,"click",r[17]),R(De,"click",r[18])],vt=!0)},p(u,x){x[0]&32&&(E.checked=u[5]),x[0]&16&&(D.checked=u[4]),x[0]&256&&be(I,u[8]),x[0]&128&&be(L,u[7]);const Zt={};x[0]&4&&(Zt.rows=u[2]),ce.$set(Zt),x[0]&8&&et(K.value)!==u[3]&&be(K,u[3]),(!O||x[0]&64)&&j(rt,u[6]),(!O||x[0]&1)&&j(at,u[0]),(!O||x[0]&1024)&&j(_t,u[10]),(!O||x[0]&8192)&&j(ht,u[13]),(!O||x[0]&2)&&j(ut,u[1]),(!O||x[0]&4096)&&j(dt,u[12]),(!O||x[0]&2048)&&j(ct,u[11]),(!O||x[0]&512)&&j(ft,u[9]),(!O||x[0]&128)&&j(pt,u[7]),(!O||x[0]&256)&&j(mt,u[8])},i(u){O||(bt(o.$$.fragment,u),bt(ce.$$.fragment,u),O=!0)},o(u){xt(o.$$.fragment,u),xt(ce.$$.fragment,u),O=!1},d(u){u&&F(e),yt(o),u&&F(_),u&&F(h),u&&F(C),u&&F(W),u&&F(P),u&&F(de),yt(ce),u&&F(tt),u&&F(ke),u&&F(nt),u&&F(Ee),vt=!1,hs(Yt)}}}let $e=50;function gs(r,e,t){e.alive&&(e.follows?r.fill(r.color("red")):e.in_recovery(t)?r.fill(r.color("blue")):e.sex=="female"?r.fill(r.color(e.color[0]+100,e.color[1]+100,e.color[2]+100)):r.fill(r.color(...e.color)),r.ellipse(e.position.x,e.position.y,e.size.x,e.size.y))}function ws(r,e){e.hungry+=1}function bs(){window.location.reload()}function xs(r,e,t){let o,_,h,p;const y=[{key:"name",title:"Name",value:l=>l._name,sortable:!0},{key:"born",title:"Born",value:l=>Math.floor(l._born),sortable:!0},{key:"age",title:"Age",value:l=>Math.abs(M-l._born),sortable:!0},{key:"sex",title:"Sex",value:l=>l._sex,sortable:!0},{key:"rep_time",title:"Reproduction",value:l=>Math.floor(l._reproduced),sortable:!0},{key:"speed",title:"Speed",value:l=>Math.floor(l._speed),sortable:!0},{key:"stamina",title:"Stamina",value:l=>Math.floor(l._max_stamina),sortable:!0}];let c=1e3,w=600,k=0,A=0,v=[],g=[new Se({}),new Se({})],G=0,S=0,Y=0,le=0,J=0,H=1,ne=!1,Z=!0,M=0,Q=5e4,re=30,U=1,xe,V=c/$e,q=w/$e,E=new Array(V);for(let l=0;l<V;l++){E[l]=new Array(q);for(let a=0;a<q;a++)E[l][a]=new Array(0)}function Ie(){for(let l=0;l<E.length;l++)for(let a=0;a<E[l].length;a++)E[l][a].length=0}function Le(){Ie();let l,a;for(let m=0;m<v.length;m++)v[m].alive&&(l=v[m].discrete_pos_x(V,c),a=v[m].discrete_pos_y(q,w),E[l][a].push(v[m]))}function ye(l,a,m){let b=a.discrete_pos_x(V,c),ue=a.discrete_pos_y(q,w),C=E[b][ue],W=Math.floor(Math.random()*(C.length-1));W<0&&(W=0);for(let P=W;P<C.length;P++)if(C[P]!=a){if(a.hungry>=a.hungry_when){if(a.do_you_eat(C[P])){a.move_towards(C[P],m,!0),a.hunting=!0;break}}else if(a.followed_by==C[P]&&C[P].hunting){a.move_away(C[P]);break}else if(a.sex=="male"&&C[P].sex=="female"&&m-C[P].reproduced>C[P].reproduce_time&&C[P].could_you_reproduce(a)){a.move_towards(C[P],m,!1);break}m%50==0&&a.change_direction({})}else m%100==0&&a.change_direction({})}function ae(l,a,m,b){m.alive?(Z&&b%U==0&&l.line(a.position.x,a.position.y,m.position.x,m.position.y),console.log("This still happens"),a.hunt({prey:m,timer:b,width:c,height:w})&&(t(1,S+=1),t(22,Y+=1))):a.follows=null}function D(l,a,m,b){m.alive?(Z&&b%U==0&&l.line(a.position.x,a.position.y,m.position.x,m.position.y),a.mate({prey:m,timer:b,width:c,height:w})&&(a.follows=null,v.push(m.reproduce(a,b)),t(24,J+=1),t(0,G+=1))):a.follows=null}function Oe(l,a,m){m-a.born>a.max_age&&a.alive&&(a.die(m),t(1,S+=1),t(23,le+=1))}const Re=l=>{l.mousePressed=()=>{l.noLoop()},l.mouseReleased=()=>{l.loop()},l.setup=()=>{k=l.windowWidth%$e,A=l.windowHeight%$e,c=l.windowWidth-k,w=l.windowHeight-A;let a=l.createCanvas(c,w);a.elt.style.zIndex=-1,l.stroke(200)},l.draw=()=>{if(l.frameRate(re),M%10==0&&t(9,xe=Math.floor(l.frameRate())),Le(),M%U==0){if(l.background(255),ne)for(var a=0;a<=c;a+=c/V)for(var m=0;m<=w;m+=w/q)l.line(a,0,a,w),l.line(0,m,c,m);v.forEach(function(b){gs(l,b,M)})}t(6,M=l.frameCount);for(let b=0;b<v.length;b++)v[b].alive&&(v[b].follows?v[b].hunting?ae(l,v[b],v[b].follows,M):D(l,v[b],v[b].follows,M):(ye(l,v[b],M),v[b].walk({width:c,height:w})),Oe(l,v[b],M),ws(l,v[b]));M>Q&&l.noLoop()}};function Me(){for(let l=0;l<H;l++)v.push(new zt({born:M}));t(0,G+=H)}function $(){for(let l=0;l<H;l++)v.push(new Se({born:M}));t(0,G+=H)}function _e(){for(let l=0;l<H;l++)v.push(new kt({born:M}));t(0,G+=H)}function Ae(){v.forEach(function(l){l.change_direction({direction:100})})}function I(){Q=M}function Ge(){t(2,g=v.filter(l=>l.alive))}function ze(){Z=this.checked,t(5,Z)}function ee(){ne=this.checked,t(4,ne)}function he(){U=et(this.value),t(8,U)}function He(){re=et(this.value),t(7,re)}function L(){H=et(this.value),t(3,H)}return r.$$.update=()=>{r.$$.dirty[0]&3&&t(13,o=G-S),r.$$.dirty[0]&4194306&&t(12,_=Math.floor(Y/S*100)),r.$$.dirty[0]&8388610&&t(11,h=Math.floor(le/S*100)),r.$$.dirty[0]&16777217&&t(10,p=Math.floor(J/G*100))},[G,S,g,H,ne,Z,M,re,U,xe,p,h,_,o,y,Re,Me,$,_e,Ae,I,Ge,Y,le,J,ze,ee,he,He,L]}class ys extends es{constructor(e){super();ts(this,e,xs,vs,ss,{},null,[-1,-1])}}function Ms(r){let e,t,o;return t=new ys({}),{c(){e=n("main"),gt(t.$$.fragment)},m(_,h){T(_,e,h),wt(t,e,null),o=!0},p:us,i(_){o||(bt(t.$$.fragment,_),o=!0)},o(_){xt(t.$$.fragment,_),o=!1},d(_){_&&F(e),yt(t)}}}class zs extends es{constructor(e){super();ts(this,e,null,Ms,ss,{})}}new zs({target:document.getElementById("app")});
